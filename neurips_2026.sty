% neurips_2026.sty
% NeurIPS 2026 style file (based on standard NeurIPS template)
% 
% Options:
%   [preprint]    - For preprint/arXiv submission (shows author names)
%   [final]       - For camera-ready submission
%   [nonatbib]    - Do not load natbib (if you have conflicts)

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{neurips_2026}[2026/01/01 NeurIPS 2026 submission/camera-ready style file]

% Boolean flags
\newif\if@neuripsfinal\@neuripsfinalfalse
\newif\if@neuripspreprint\@neuripspreprintfalse
\newif\if@natbib\@natbibtrue

\DeclareOption{final}{\@neuripsfinaltrue}
\DeclareOption{preprint}{\@neuripspreprinttrue}
\DeclareOption{nonatbib}{\@natbibfalse}

\ProcessOptions\relax

% Page layout (NeurIPS uses specific margins)
\RequirePackage[
    letterpaper,
    top=1in,
    bottom=1in,
    left=1in,
    right=1in
]{geometry}

% Typography
\RequirePackage{times}
\RequirePackage{latexsym}

% Math
\RequirePackage{amsmath}
\RequirePackage{amssymb}

% Natbib for references (unless disabled)
\if@natbib
    \RequirePackage[numbers,compress,sort]{natbib}
\fi

% Line numbers for review (not final)
\if@neuripsfinal
    % No line numbers for final
\else
    \if@neuripspreprint
        % No line numbers for preprint
    \else
        \RequirePackage{lineno}
        \linenumbers
    \fi
\fi

% Section formatting
\RequirePackage[small,bf]{titlesec}
\titleformat{\section}{\normalfont\large\bfseries}{\thesection}{1em}{}
\titleformat{\subsection}{\normalfont\normalsize\bfseries}{\thesubsection}{1em}{}
\titleformat{\subsubsection}{\normalfont\normalsize\bfseries}{\thesubsubsection}{1em}{}
\titleformat{\paragraph}[runin]{\normalfont\normalsize\bfseries}{\theparagraph}{1em}{}

% Title formatting
\def\@maketitle{%
  \newpage
  \null
  \vskip 2em%
  \begin{center}%
    {\LARGE \@title \par}%
    \vskip 1.5em%
    {\large
      \lineskip .5em%
      \begin{tabular}[t]{c}%
        \if@neuripsfinal
          \@author
        \else
          \if@neuripspreprint
            \@author
          \else
            Anonymous Author(s)\\
            Affiliation\\
            Address\\
            \texttt{email}
          \fi
        \fi
      \end{tabular}\par}%
    \vskip 1em%
  \end{center}%
  \par
  \vskip 1.5em}

% Abstract formatting
\renewenvironment{abstract}{%
    \begin{center}%
        {\bfseries Abstract}%
    \end{center}%
    \begin{quote}%
        \small
}{%
    \end{quote}%
    \vskip 1em%
}

% Acknowledgments environment
\newenvironment{ack}{%
    \section*{Acknowledgments}
}{}

% Lists
\RequirePackage{enumitem}
\setlist{nosep,leftmargin=*}

% Captions
\RequirePackage{caption}
\captionsetup{
    font=small,
    labelfont=bf,
    format=plain
}

% Footnotes
\renewcommand\footnoterule{%
  \kern-3\p@
  \hrule\@width.4\columnwidth
  \kern2.6\p@}

% Header/footer
\if@neuripsfinal
    % Camera-ready: no header
\else
    \if@neuripspreprint
        \RequirePackage{fancyhdr}
        \pagestyle{fancy}
        \fancyhf{}
        \renewcommand{\headrulewidth}{0pt}
        \fancyhead[C]{\small Preprint. Under review.}
        \fancyfoot[C]{\thepage}
    \else
        \RequirePackage{fancyhdr}
        \pagestyle{fancy}
        \fancyhf{}
        \renewcommand{\headrulewidth}{0pt}
        \fancyhead[C]{\small Submitted to NeurIPS 2026}
        \fancyfoot[C]{\thepage}
    \fi
\fi

% Hyperref configuration (if loaded)
\AtBeginDocument{%
    \@ifpackageloaded{hyperref}{%
        \hypersetup{
            colorlinks=true,
            linkcolor=blue,
            citecolor=blue,
            urlcolor=blue
        }
    }{}
}

\endinput
